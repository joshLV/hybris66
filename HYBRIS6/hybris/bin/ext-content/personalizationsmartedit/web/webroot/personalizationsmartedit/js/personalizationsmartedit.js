angular.module("personalizationsmarteditCommons",["personalizationcommonsTemplates","yjqueryModule","alertServiceModule","languageServiceModule","seConstantsModule","l10nModule","catalogServiceModule"]).constant("PERSONALIZATION_MODEL_STATUS_CODES",{ENABLED:"ENABLED",DISABLED:"DISABLED"}).constant("PERSONALIZATION_VIEW_STATUS_MAPPING_CODES",{ALL:"ALL",ENABLED:"ENABLED",DISABLED:"DISABLED"}).constant("PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",{0:{borderClass:"personalizationsmarteditComponentSelected0",listClass:"personalizationsmarteditComponentSelectedList0"},1:{borderClass:"personalizationsmarteditComponentSelected1",listClass:"personalizationsmarteditComponentSelectedList1"},2:{borderClass:"personalizationsmarteditComponentSelected2",listClass:"personalizationsmarteditComponentSelectedList2"},3:{borderClass:"personalizationsmarteditComponentSelected3",listClass:"personalizationsmarteditComponentSelectedList3"},4:{borderClass:"personalizationsmarteditComponentSelected4",listClass:"personalizationsmarteditComponentSelectedList4"},5:{borderClass:"personalizationsmarteditComponentSelected5",listClass:"personalizationsmarteditComponentSelectedList5"},6:{borderClass:"personalizationsmarteditComponentSelected6",listClass:"personalizationsmarteditComponentSelectedList6"},7:{borderClass:"personalizationsmarteditComponentSelected7",listClass:"personalizationsmarteditComponentSelectedList7"},8:{borderClass:"personalizationsmarteditComponentSelected8",listClass:"personalizationsmarteditComponentSelectedList8"},9:{borderClass:"personalizationsmarteditComponentSelected9",listClass:"personalizationsmarteditComponentSelectedList9"},10:{borderClass:"personalizationsmarteditComponentSelected10",listClass:"personalizationsmarteditComponentSelectedList10"},11:{borderClass:"personalizationsmarteditComponentSelected11",listClass:"personalizationsmarteditComponentSelectedList11"},12:{borderClass:"personalizationsmarteditComponentSelected12",listClass:"personalizationsmarteditComponentSelectedList12"},13:{borderClass:"personalizationsmarteditComponentSelected13",listClass:"personalizationsmarteditComponentSelectedList13"},14:{borderClass:"personalizationsmarteditComponentSelected14",listClass:"personalizationsmarteditComponentSelectedList14"}}).run(["$rootScope","PERSONALIZATION_MODEL_STATUS_CODES",function(e,t){e.PERSONALIZATION_MODEL_STATUS_CODES=t}]).filter("statusNotDeleted",["personalizationsmarteditUtils",function(e){return function(t){return angular.isArray(t)?e.getVisibleItems(t):t}}]).factory("personalizationsmarteditUtils",["$q","$filter","PERSONALIZATION_MODEL_STATUS_CODES","PERSONALIZATION_VIEW_STATUS_MAPPING_CODES","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING","l10nFilter","catalogService",function(e,t,n,a,o,i,r){var s={};return s.pushToArrayIfValueExists=function(e,t,n){n&&e.push({key:t,value:n})},s.getContainerIdForElement=function(e){var t=e.closest('[data-smartedit-container-source-id][data-smartedit-container-type="CxCmsComponentContainer"]');return t.length?t.data().smarteditContainerSourceId:null},s.getContainerIdForComponent=function(e,t){var n=angular.element('[data-smartedit-component-id="'+t+'"][data-smartedit-component-type="'+e+'"]');return angular.isArray(n)&&(n=n[0]),s.getContainerIdForElement(n)},s.getSlotIdForElement=function(e){var t=e.closest('[data-smartedit-component-type="ContentSlot"]');return t.length?t.data().smarteditComponentId:null},s.getSlotIdForComponent=function(e,t){var n=angular.element('[data-smartedit-component-id="'+t+'"][data-smartedit-component-type="'+e+'"]');return angular.isArray(n)&&(n=n[0]),s.getSlotIdForElement(n)},s.getVariationCodes=function(e){return void 0===e||null===e?[]:e.map(function(e){return e.code}).filter(function(e){return void 0!==e})},s.getPageId=function(){return/page\-([\w]+)/.exec($("iframe").contents().find("body").attr("class"))[1]},s.getVariationKey=function(e,t){return void 0===e||void 0===t?[]:t.map(function(t){return{variationCode:t.code,customizationCode:e,catalog:t.catalog,catalogVersion:t.catalogVersion}})},s.getSegmentTriggerForVariation=function(e){var t=(e.triggers||[]).filter(function(e){return"segmentTriggerData"===e.type});return 0===t.length?{}:t[0]},s.isPersonalizationItemEnabled=function(e){return e.status===n.ENABLED},s.getEnablementTextForCustomization=function(e,n){return n=n||"personalization",s.isPersonalizationItemEnabled(e)?t("translate")(n+".customization.enabled"):t("translate")(n+".customization.disabled")},s.getEnablementTextForVariation=function(e,n){return n=n||"personalization",s.isPersonalizationItemEnabled(e)?t("translate")(n+".variation.enabled"):t("translate")(n+".variation.disabled")},s.getEnablementActionTextForVariation=function(e,n){return n=n||"personalization",s.isPersonalizationItemEnabled(e)?t("translate")(n+".variation.options.disable"):t("translate")(n+".variation.options.enable")},s.getActivityStateForCustomization=function(e){return e.status===n.ENABLED?moment().isBetween(new Date(e.enabledStartDate),new Date(e.enabledEndDate),"minute","[]")?"status-active":"status-ignore":"status-inactive"},s.getActivityStateForVariation=function(e,t){return t.enabled?s.getActivityStateForCustomization(e):"status-inactive"},s.isItemVisible=function(e){return"DELETED"!==e.status},s.getVisibleItems=function(e){return e.filter(function(e){return s.isItemVisible(e)})},s.getValidRank=function(e,t,n){for(var a=e.indexOf(t),o=n<0?-1:1,i=a+n;i>=0&&i<e.length&&!s.isItemVisible(e[i]);)i+=o;return i=i>=e.length?e.length-1:i,i=i<0?0:i,e[i].rank},s.getStatusesMapping=function(){var e=[];return e.push({code:a.ALL,text:"personalization.context.status.all",modelStatuses:[n.ENABLED,n.DISABLED]}),e.push({code:a.ENABLED,text:"personalization.context.status.enabled",modelStatuses:[n.ENABLED]}),e.push({code:a.DISABLED,text:"personalization.context.status.disabled",modelStatuses:[n.DISABLED]}),e},s.getClassForElement=function(e){var t=e%Object.keys(o).length;return o[t].listClass},s.getLetterForElement=function(e){var t=e%Object.keys(o).length;return String.fromCharCode("a".charCodeAt()+t).toUpperCase()},s.getCommerceCustomizationTooltip=function(e,n,a){n=n||"",a=a||"\n";var o="";return angular.forEach(e.commerceCustomizations,function(e,i){o+=n+t("translate")("personalization.modal.manager.commercecustomization."+i)+": "+e+a}),o},s.getCommerceCustomizationTooltipHTML=function(e){return s.getCommerceCustomizationTooltip(e,"<div>","</div>")},s.isItemFromCurrentCatalog=function(e,t){var n=t.seExperienceData.catalogDescriptor;return e.catalog===n.catalogId&&e.catalogVersion===n.catalogVersion},s.hasCommerceActions=function(e){return e.numberOfCommerceActions>0},s.getCatalogVersionNameByUuid=function(t){var n=e.defer();return r.getCatalogVersionByUuid(t).then(function(e){n.resolve(i(e.catalogName)+" ("+e.version+")")}),n.promise},s.getAndSetCatalogVersionNameL10N=function(e){s.getCatalogVersionNameByUuid(e.catalog+"/"+e.catalogVersion).then(function(t){e.catalogVersionNameL10N=t})},s}]).factory("personalizationsmarteditMessageHandler",["alertService",function(e){var t={};return t.sendInformation=function(t){e.showInfo(t)},t.sendError=function(t){e.showDanger(t)},t.sendWarning=function(t){e.showWarning(t)},t.sendSuccess=function(t){e.showSuccess(t)},t}]).factory("personalizationsmarteditCommerceCustomizationService",function(){var e=["cxCmsActionData"],t={},n=[],a=function(t){return e.some(function(e){return e===t.type})},o=function(e){return!a(e)},i=function(e,t){return void 0!==t&&null!==t&&!0===t[e.confProperty]};return t.registerType=function(e){var t=e.type,a=!1;n.forEach(function(e){e.type===t&&(a=!0)}),a||n.push(e)},t.getAvailableTypes=function(e){return n.filter(function(t){return i(t,e)})},t.isCommerceCustomizationEnabled=function(e){return t.getAvailableTypes(e).length>0},t.getNonCommerceActionsCount=function(e){return(e.actions||[]).filter(a).length},t.getCommerceActionsCountMap=function(e){var t={};return(e.actions||[]).filter(o).forEach(function(e){var n=e.type.toLowerCase(),a=t[n];void 0===a?a=1:a+=1,t[n]=a}),t},t.getCommerceActionsCount=function(e){return(e.actions||[]).filter(o).length},t}).directive("uisOpenClose",["$parse","$timeout",function(e,t){return{restrict:"A",require:"uiSelect",link:function(n,a,o,i){i.onOpenCloseCallback=e(o.uisOpenClose),n.$watch("$select.open",function(e,a){e!==a&&t(function(){i.onOpenCloseCallback(n,{isOpen:e})})})}}}]).directive("negate",[function(){return{require:"ngModel",link:function(e,t,n,a){a.$isEmpty=function(e){return!!e},a.$formatters.unshift(function(e){return!e}),a.$parsers.unshift(function(e){return!e})}}}]).directive("personalizationCurrentElement",[function(){return{restrict:"A",link:function(e,t,n){n.personalizationCurrentElement&&e.$eval(n.personalizationCurrentElement)(t)}}}]),angular.module("personalizationsmarteditComponentHandlerServiceModule",["componentHandlerServiceModule"]).constant("COMPONENT_CONTAINER_TYPE","CxCmsComponentContainer").factory("personalizationsmarteditComponentHandlerService",["componentHandlerService","CONTAINER_TYPE_ATTRIBUTE","COMPONENT_CONTAINER_TYPE","CONTAINER_ID_ATTRIBUTE","TYPE_ATTRIBUTE","CONTENT_SLOT_TYPE",function(e,t,n,a,o,i){var r=this;return angular.extend(r,e),r.getParentContainerForComponent=function(e){return e.closest("["+t+"="+n+"]")},r.getParentContainerIdForComponent=function(e){return e.closest("["+t+"="+n+"]").attr(a)},r.getParentSlotForComponent=function(e){return e.closest("["+o+"="+i+"]")},r.getParentSlotIdForComponent=function(t){return e.getParentSlotForComponent(t)},r}]),angular.module("personalizationsmarteditContextUtilsModule",[]).factory("personalizationsmarteditContextUtils",function(){var e=this,t=function(){this.enabled=!1},n=function(){this.enabled=!1,this.selectedCustomization=null,this.selectedVariations=null,this.selectedComponents=null},a=function(){this.enabled=!1,this.selectedItems=null,this.customize=new n},o=function(){this.pageId=null,this.seExperienceData=null,this.seConfigurationData=null,this.sePreviewData=null};return e.getContextObject=function(){return{personalization:new t,customize:new n,combinedView:new a,seData:new o}},e.clearCustomizeContext=function(e){var t=e.getCustomize();t.enabled=!1,t.selectedCustomization=null,t.selectedVariations=null,t.selectedComponents=null,e.setCustomize(t)},e.clearCustomizeContextAndReloadPreview=function(t,n){var a=angular.copy(n.getCustomize().selectedVariations);e.clearCustomizeContext(n),angular.isObject(a)&&!angular.isArray(a)&&t.clearAndReloadPreview()},e.clearCombinedViewCustomizeContext=function(e){var t=e.getCombinedView();t.customize.enabled=!1,t.customize.selectedCustomization=null,t.customize.selectedVariations=null,t.customize.selectedComponents=null,(t.selectedItems||[]).forEach(function(e){delete e.highlighted}),e.setCombinedView(t)},e.clearCombinedViewContext=function(e){var t=e.getCombinedView();t.enabled=!1,t.selectedItems=null,e.setCombinedView(t)},e.clearCombinedViewContextAndReloadPreview=function(t,n){var a=angular.copy(n.getCombinedView().enabled),o=angular.copy(n.getCombinedView().selectedItems);e.clearCombinedViewContext(n),a&&o&&t.clearAndReloadPreview()},e}),angular.module("personalizationsmarteditCommons").constant("PERSONALIZATION_DATE_FORMATS",{SHORT_DATE_FORMAT:"M/D/YY",MODEL_DATE_FORMAT:"YYYY-MM-DDTHH:mm:SSZ"}).factory("personalizationsmarteditDateUtils",["$filter","DATE_CONSTANTS","isBlank","PERSONALIZATION_DATE_FORMATS",function(e,t,n,a){var o={};return o.formatDate=function(e,n){return n=n||t.MOMENT_FORMAT,e?(e.match&&e.match(/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+|\-)(\d{4})$/)&&(e=e.slice(0,-2)+":"+e.slice(-2)),moment(new Date(e)).format(n)):""},o.formatDateWithMessage=function(t,n){return n=n||a.SHORT_DATE_FORMAT,t?o.formatDate(t,n):e("translate")("personalization.toolbar.pagecustomizations.nodatespecified")},o.isDateInThePast=function(e){return!n(e)&&moment(e,t.MOMENT_FORMAT).isBefore()},o.isDateValidOrEmpty=function(e){return n(e)||moment(e,t.MOMENT_FORMAT).isValid()},o.isDateRangeValid=function(e,t){return!(!n(e)&&!n(t))||moment(new Date(e)).isSameOrBefore(moment(new Date(t)))},o.isDateStrFormatValid=function(e,a){return a=a||t.MOMENT_FORMAT,!n(e)&&moment(e,a,!0).isValid()},o}]).directive("dateTimePickerRange",["$timeout","languageService","personalizationsmarteditDateUtils","DATE_CONSTANTS",function(e,t,n,a){return{templateUrl:"dateTimePickerRangeTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{name:"=",dateFrom:"=",dateTo:"=",isEditable:"=",dateFormat:"="},link:function(e,o,i,r){function s(){return o.querySelectorAll("#date-picker-range-from")}function l(){return s().datetimepicker().data("DateTimePicker")}function c(){return o.querySelectorAll("#date-picker-range-to")}function d(){return c().datetimepicker().data("DateTimePicker")}e.placeholderText="personalization.commons.datetimepicker.placeholder",e.isFromDateValid=!1,e.isToDateValid=!1,e.isEndDateInThePast=!1,e.isEditable&&(e.getDateOrDefault=function(e){try{return moment(new Date(e))}catch(e){return!1}},e.getMinToDate=function(t){return n.isDateInThePast(t)?new moment:e.getDateOrDefault(t)},s().datetimepicker({format:a.MOMENT_FORMAT,showClear:!0,showClose:!0,useCurrent:!1,keepInvalid:!0,locale:t.getBrowserLocale().split("-")[0]}).on("dp.change",function(t){var a=n.formatDate(t.date);n.isDateValidOrEmpty(a)&&n.isDateValidOrEmpty(e.dateTo)&&!n.isDateRangeValid(a,e.dateTo)&&(a=angular.copy(e.dateTo)),e.dateFrom=a}),c().datetimepicker({format:a.MOMENT_FORMAT,showClear:!0,showClose:!0,useCurrent:!1,keepInvalid:!0,locale:t.getBrowserLocale().split("-")[0]}).on("dp.change",function(t){var a=n.formatDate(t.date);n.isDateValidOrEmpty(a)&&n.isDateValidOrEmpty(e.dateFrom)&&!n.isDateRangeValid(e.dateFrom,a)&&(a=angular.copy(e.dateFrom)),e.dateTo=a}),e.$watch("dateFrom",function(){e.isFromDateValid=n.isDateValidOrEmpty(e.dateFrom),n.isDateStrFormatValid(e.dateFrom,a.MOMENT_FORMAT)?d().minDate(e.getMinToDate(e.dateFrom)):d().minDate(new moment)},!0),e.$watch("dateTo",function(){n.isDateValidOrEmpty(e.dateTo)?(e.isToDateValid=!0,e.isEndDateInThePast=n.isDateInThePast(e.dateTo)):(e.isToDateValid=!1,e.isEndDateInThePast=!1),n.isDateStrFormatValid(e.dateTo,a.MOMENT_FORMAT)&&l().maxDate(e.getDateOrDefault(e.dateTo))},!0))}}}]).directive("isdatevalidorempty",["isBlank","personalizationsmarteditDateUtils",function(e,t){return{restrict:"A",require:"ngModel",scope:!1,link:function(e,n,a,o){o.$validators.isdatevalidorempty=function(e){return t.isDateValidOrEmpty(e)}}}}]),angular.module("personalizationsmarteditCommons").directive("personalizationInfiniteScroll",["$rootScope","yjQuery","$window","$timeout",function(e,t,n,a){return{link:function(o,i,r){var s,l,c,d;return n=angular.element(n),c=0,null!==r.personalizationInfiniteScrollDistance&&o.$watch(r.personalizationInfiniteScrollDistance,function(e){return c=parseInt(e,10)}),d=!0,s=!1,null!==r.personalizationInfiniteScrollDisabled&&o.$watch(r.personalizationInfiniteScrollDisabled,function(e){if((d=!e)&&s)return s=!1,l()}),e.$on("refreshStart",function(){i.animate({scrollTop:"0"})}),l=function(){var n,a,l,m,p;if(!(i.children().length<=0))return n=t(i.children()[0]),a=i.offset().top+i.height(),p=n.offset().top+n.height(),l=p-a,(m=l<=i.height()*c)&&d?e.$$phase?o.$eval(r.personalizationInfiniteScroll):o.$apply(r.personalizationInfiniteScroll):m?s=!0:void 0},i.on("scroll",l),o.$on("$destroy",function(){return n.off("scroll",l)}),a(function(){return r.personalizationInfiniteScrollImmediateCheck?o.$eval(r.personalizationInfiniteScrollImmediateCheck)?l():void 0:l()},0)}}}]),angular.module("personalizationsmarteditCommons").directive("personalizationsmarteditPagination",function(){return{templateUrl:"personalizationsmarteditPaginationTemplate.html",restrict:"E",scope:{callback:"=",pages:"=?",currentPage:"=?",pageSizes:"=?",currentSize:"=?",pagesOffset:"=?",fixedPageSize:"=?",incrementByOne:"=?"},link:function(e,t,n){e.callback||console.log("callback is undefined!"),e.pages=e.pages||[0,1,2],e.currentPage=e.currentPage||0,e.pageSizes=e.pageSizes||[5,10,25,50,100],e.currentSize=e.currentSize||10,e.pagesOffset=e.pagesOffset||1,e.fixedPageSize=e.fixedPageSize||!1,e.incrementByOne=e.incrementByOne||!1,e.pageClick=function(t){e.currentPage!==t&&(e.currentPage=t,e.callback(e))},e.pageSizeClick=function(t){e.currentSize!==t&&(e.currentSize=t,e.currentPage=0,e.callback(e))},e.hasPrevious=function(){return e.currentPage>0},e.hasNext=function(){return e.currentPage<e.pages.length-1},e.isActive=function(t){return e.currentPage===t},e.rightClick=function(){e.hasNext()&&(e.currentPage=e.incrementByOne?e.currentPage+1:e.pages.length-1,e.callback(e))},e.leftClick=function(){e.hasPrevious()&&(e.currentPage=e.incrementByOne?e.currentPage-1:0,e.callback(e))},e.pagesToDisplay=function(){var t=2*e.pagesOffset+1;if(e.pages.length<=t)return e.pages;var n=Math.max(e.currentPage-e.pagesOffset,0);return n+t>e.pages.length&&(n=e.pages.length-t),e.pages.slice(n,n+t)},e.availablePageSizes=function(){return e.pageSizes},e.getCurrentPageSize=function(){return e.currentSize},e.isFixedPageSize=function(){return e.fixedPageSize},e.showArrows=function(){return e.pages.length>2*e.pagesOffset+1}}}}),angular.module("personalizationsmarteditScrollZone",["yjqueryModule"]).controller("personalizationsmarteditScrollZoneController",["$scope","$timeout","$compile","yjQuery",function(e,t,n,a){var o=this,i=!0;Object.defineProperty(this,"scrollZoneTop",{get:function(){return i},set:function(e){i=e}});var r=!0;Object.defineProperty(this,"scrollZoneBottom",{get:function(){return r},set:function(e){r=e}});var s=!1;Object.defineProperty(this,"start",{get:function(){return s},set:function(e){s=e}});var l={};Object.defineProperty(this,"elementToScroll",{get:function(){return l},set:function(e){l=e}});var c=!1;Object.defineProperty(this,"scrollZoneVisible",{get:function(){return c},set:function(e){c=e}}),this.stopScroll=function(){o.start=!1},this.scrollTop=function(){o.start&&(o.scrollZoneTop=!(o.elementToScroll.scrollTop()<=2),o.scrollZoneBottom=!0,o.elementToScroll.scrollTop(o.elementToScroll.scrollTop()-15),t(function(){o.scrollTop()},100))},this.scrollBottom=function(){if(o.start){o.scrollZoneTop=!0;var e=o.elementToScroll.get(0).scrollHeight-o.elementToScroll.scrollTop();o.scrollZoneBottom=!(Math.abs(e-o.elementToScroll.outerHeight())<2),o.elementToScroll.scrollTop(o.elementToScroll.scrollTop()+15),t(function(){o.scrollBottom()},100)}},this.$onChanges=function(e){e.scrollZoneVisible&&(o.start=e.scrollZoneVisible.currentValue,o.scrollZoneTop=!0,o.scrollZoneBottom=!0)},this.$onInit=function(){var t=n('<div id="sliderTopScrollZone" data-ng-include="\'personalizationsmarteditScrollZoneTopTemplate.html\'"></div>')(e);angular.element("body").append(t);var a=n('<div id="sliderBottomScrollZone" data-ng-include="\'personalizationsmarteditScrollZoneBottomTemplate.html\'"></div>')(e);angular.element("body").append(a),o.elementToScroll=o.getElementToScroll()},this.$onDestroy=function(){angular.element("#sliderTopScrollZone").scope().$destroy(),angular.element("#sliderTopScrollZone").remove(),angular.element("#sliderBottomScrollZone").scope().$destroy(),angular.element("#sliderBottomScrollZone").remove(),angular.element("body").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&this.data.indexOf("personalizationsmarteditScrollZone")>-1&&a(this).remove()})}}]).component("personalizationsmarteditScrollZone",{controller:"personalizationsmarteditScrollZoneController",controllerAs:"ctrl",transclude:!0,bindings:{scrollZoneVisible:"<",getElementToScroll:"&",isTransparent:"<?"}}),angular.module("personalizationcommonsTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/personalizationcommons/dateTimePickerRange/dateTimePickerRangeTemplate.html",'<div class="pe-datetime-range">\n    <div class="col-md-6 pe-datetime-range__from" data-ng-class="{\'has-error\': !isFromDateValid}">\n        <label for="customization-start-date" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate" class="personalization-modal__label"></label>\n        <span class="pe-datetime-range__help-tooltip help-inline help-inline--tooltip">\n            <span class="pe-datetime-range__help-icon hyicon hyicon-helpoff help-icon-inline"></span>\n            <span class="pe-datetime-range__help-block help-block-inline help-block-inline--text" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate.help"></span>\n        </span>\n        <div class="input-group date pe-date-field" id="date-picker-range-from" data-ng-show="isEditable">\n            <input type=\'text\' name="date_from_key" class="form-control pe-date-field__input" placeholder="{{ placeholderText | translate}}" ng-disabled="!isEditable" name="{{name}}" isdatevalidorempty data-ng-model="dateFrom" id="customization-start-date" />\n            <span class="input-group-addon pe-datetime-range__picker" data-ng-show="isEditable">\n                <span class="glyphicon glyphicon-calendar pe-datetime-range__picker__icon"></span>\n            </span>\n        </div>\n        <div class="input-group date pe-date-field" id="date-picker-range-from" data-ng-show="!isEditable">\n            <input type=\'text\' name="date_from_key" class="form-control pe-date-field__input " data-ng-class="{\'pe-input--is-disabled\': !isEditable}" data-ng-model="dateFrom" data-date-formatter id="customization-start-date" isdatevalidorempty data-ng-disabled="true" data-format-type="short">\n        </div>\n        <span ng-if="!isFromDateValid" class="help-block pe-datetime__error-msg pe-datetime__msg" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformatfrom.description">\n        </span>\n    </div>\n    <div class="col-md-6 pe-datetime-range__to" data-ng-class="{\'has-error\':!isToDateValid, \'has-warning\':isEndDateInThePast}">\n        <label for="customization-end-date" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate" class="personalization-modal__label"></label>\n        <span class="pe-datetime-range__help-tooltip help-inline help-inline--tooltip">\n            <span class="pe-datetime-range__help-icon hyicon hyicon-helpoff help-icon-inline"></span>\n            <span class="pe-datetime-range__help-block help-block-inline help-block-inline--text" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate.help"></span>\n        </span>\n        <div class="input-group date pe-date-field" id="date-picker-range-to">\n            <input type=\'text\' name="date_to_key" class="form-control pe-date-field__input" placeholder="{{ placeholderText | translate}}" ng-disabled="!isEditable" name="{{name}}" isdatevalidorempty data-ng-model="dateTo" id="customization-end-date" />\n            <span class="input-group-addon pe-datetime-range__picker" data-ng-show="isEditable">\n                <span class="glyphicon glyphicon-calendar pe-datetime-range__picker__icon"></span>\n            </span>\n        </div>\n        <div class="input-group date pe-date-field" id="date-picker-range-to" data-ng-show="!isEditable">\n            <input type=\'text\' name="date_to_key" class="form-control pe-date-field__input " data-ng-class="{\'pe-input--is-disabled\': !isEditable}" data-ng-model="dateTo" data-date-formatter id="customization-end-date" isdatevalidorempty data-ng-disabled="true" data-format-type="short">\n        </div>\n        <span class="help-block pe-datetime__error-msg pe-datetime__msg" ng-if="!isToDateValid" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformat.description">\n        </span>\n        <span data-ng-if="isEndDateInThePast" class="help-block pe-datetime__warning-msg pe-datetime__msg">\n            <span class="hyicon hyicon-msgwarning"></span>\n            <span data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddateinthepast.description"></span>\n        </span>\n    </div>\n</div>'),e.put("web/features/personalizationcommons/personalizationsmarteditPagination/personalizationsmarteditPaginationTemplate.html",'<div class="row">\n    <div class="col-xs-4"></div>\n    <div class="col-xs-4">\n        <ul class="pagination pagination-lg">\n            <li class="no-underline" data-ng-if="showArrows()" data-ng-click="leftClick()" data-ng-class="hasPrevious()?\'enabled\':\'disabled\'"><a>&laquo;</a></li>\n            <li class="no-underline" data-ng-repeat="i in pagesToDisplay()" data-ng-class="isActive({{i}})?\'active\':\'\'"><a data-ng-click="pageClick(i)">{{i+1}}</a></li>\n            <li class="no-underline" data-ng-if="showArrows()" data-ng-click="rightClick()" data-ng-class="hasNext()?\'enabled\':\'disabled\'"><a>&raquo;</a></li>\n        </ul>\n    </div>\n    <div class="col-xs-2"></div>\n    <div data-uib-dropdown class="col-xs-2" data-ng-if="!isFixedPageSize()">\n        <button type="button" data-uib-dropdown-toggle class="btn btn-link pull-right">\n            <span data-ng-bind="getCurrentPageSize()"></span>\n            <span data-translate="personalization.commons.pagination.rowsperpage"></span>\n            <span class="list-arrow hyicon hyicon-arrow"></span>\n        </button>\n        <ul data-uib-dropdown-menu class="pull-right text-left" role="menu">\n            <li data-ng-repeat="i in availablePageSizes() track by $index"><a data-ng-click="pageSizeClick(i)">{{i}}</a></li>\n        </ul>\n    </div>\n</div>'),e.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneBottomTemplate.html",'<div class="perso__scrollzone perso__scrollzone--bottom" data-ng-class="ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'" data-ng-show="ctrl.scrollZoneVisible && ctrl.scrollZoneBottom" data-ng-mouseenter="ctrl.start=true;ctrl.scrollBottom()" data-ng-mouseleave="ctrl.stopScroll()">\n</div>'),e.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneTopTemplate.html",'<div class="perso__scrollzone perso__scrollzone--top" data-ng-class="ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'" data-ng-show="ctrl.scrollZoneVisible && ctrl.scrollZoneTop" data-ng-mouseenter="ctrl.start=true;ctrl.scrollTop()" data-ng-mouseleave="ctrl.stopScroll()">\n</div>')}]),angular.module("personalizationsmarteditCombinedViewComponentLightUpDecorator",["personalizationsmarteditTemplates","personalizationsmarteditContextServiceModule"]).directive("personalizationsmarteditCombinedViewComponentLightUp",["personalizationsmarteditContextService","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",function(e,t){return{templateUrl:"personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,scope:{smarteditComponentId:"@",smarteditComponentType:"@"},link:function(n,a,o){var i=[];Object.keys(t).forEach(function(e,n){i.push(t[n].borderClass)}),i=i.join(" "),n.letterForElement="",n.classForElement="",n.getPersonalizationComponentBorderClass=function(){var o=e.getCombinedView();if(o.enabled){var r=a.parent().closest('[class~="smartEditComponentX"][data-smartedit-container-source-id][data-smartedit-container-type="CxCmsComponentContainer"][data-smartedit-personalization-customization-id][data-smartedit-personalization-variation-id]');r.length>0&&(r.removeClass(i),(o.selectedItems||[]).forEach(function(e,a,o){var i=r.data().smarteditPersonalizationCustomizationId===e.customization.code;i=i&&r.data().smarteditPersonalizationVariationId===e.variation.code;var s=a%Object.keys(t).length;i&&(r.addClass(t[s].borderClass),n.letterForElement=String.fromCharCode("a".charCodeAt()+s).toUpperCase(),n.classForElement=t[s].listClass)}))}}}}}]),angular.module("personalizationsmarteditComponentLightUpDecorator",["yjqueryModule","personalizationsmarteditTemplates","personalizationsmarteditContextServiceModule","personalizationsmarteditCommons","personalizationsmarteditComponentHandlerServiceModule","componentHandlerServiceModule"]).directive("personalizationsmarteditComponentLightUp",["yjQuery","personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditComponentHandlerService","OVERLAY_COMPONENT_CLASS","CONTAINER_TYPE_ATTRIBUTE","ID_ATTRIBUTE","TYPE_ATTRIBUTE","CATALOG_VERSION_UUID_ATTRIBUTE",function(e,t,n,a,o,i,r,s,l){return{templateUrl:"personalizationsmarteditComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,scope:{smarteditComponentId:"@",smarteditComponentType:"@"},link:function(a,c,d){var m='[class~="'+o+'"][data-smartedit-container-source-id]['+i+'="CxCmsComponentContainer"]',p='[class~="'+o+'"]['+i+'="CxCmsComponentContainer"][data-smartedit-personalization-action-id]',u="["+r+"]["+l+"]["+s+"]",g=function(){var a=!1;if(angular.isArray(t.getCustomize().selectedVariations)){var o=n.getContainerIdForElement(c);a=e.inArray(o,t.getCustomize().selectedComponents)>-1}return a},C=function(e){var n=!1,a=t.getCustomize();return a.selectedCustomization&&a.selectedVariations&&(n=e.closest(p).length>0),n};a.getPersonalizationComponentBorderClass=function(){var e=c.parent().closest(u),t=e.closest(m);t.toggleClass("perso__component-decorator",C(e)),t.toggleClass("hyicon hyicon-checkedlg perso__component-decorator-icon",C(e)),t.toggleClass("personalizationsmarteditComponentSelected",g())}}}}]),angular.module("personalizationsmarteditContextMenu",["personalizationsmarteditComponentHandlerServiceModule","gatewayProxyModule"]).factory("personalizationsmarteditContextModal",["gatewayProxy",function(e){var t=function(){this.gatewayId="personalizationsmarteditContextModal",e.initForService(this)};return t.prototype.openDeleteAction=function(e){},t.prototype.openAddAction=function(e){},t.prototype.openEditAction=function(e){},t.prototype.openEditComponentAction=function(e){},new t}]).factory("personalizationsmarteditContextModalHelper",["personalizationsmarteditContextModal","personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService",function(e,t,n){var a={},o=function(){return t.getCombinedView().enabled?t.getCombinedView().customize.selectedVariations.code:t.getCustomize().selectedVariations.code},i=function(e){if(t.getCombinedView().enabled){var n=t.getCombinedView().customize.selectedCustomization;return!n&&e&&(n=t.getCombinedView().selectedItems.filter(function(t){return t.customization.code===e})[0].customization),n}return t.getCustomize().selectedCustomization};return a.openDeleteAction=function(t){var n=angular.fromJson(t.properties),a={};a.containerId=t.containerId,a.containerSourceId=n.smarteditContainerSourceId,a.slotId=t.slotId,a.actionId=n.smarteditPersonalizationActionId||null,a.selectedVariationCode=n.smarteditPersonalizationVariationId||null,a.selectedCustomizationCode=n.smarteditPersonalizationCustomizationId||null;var o=n.smarteditCatalogVersionUuid.split("/");a.componentCatalog=o[0],a.componentCatalogVersion=o[1];var r=i(a.selectedCustomizationCode);return a.catalog=r.catalog,a.catalogVersion=r.catalogVersion,e.openDeleteAction(a)},a.openAddAction=function(t){var a=angular.fromJson(t.properties),r={};r.componentType=t.componentType,r.componentId=t.componentId,r.containerId=t.containerId,r.containerSourceId=a.smarteditContainerSourceId,r.slotId=t.slotId,r.actionId=a.smarteditPersonalizationActionId||null,r.selectedVariationCode=o();var s=a.smarteditCatalogVersionUuid.split("/");r.componentCatalog=s[0];var l=i();r.catalog=l.catalog,r.selectedCustomizationCode=l.code;var c=n.getParentSlotForComponent(t.element),d=n.getCatalogVersionUuid(c).split("/");return r.slotCatalog=d[0],e.openAddAction(r)},a.openEditAction=function(t){var n=angular.fromJson(t.properties),a={};return a.componentType=t.componentType,a.componentId=t.componentId,a.containerId=t.containerId,a.containerSourceId=n.smarteditContainerSourceId,a.slotId=t.slotId,a.actionId=n.smarteditPersonalizationActionId||null,a.selectedVariationCode=n.smarteditPersonalizationVariationId||null,a.selectedCustomizationCode=n.smarteditPersonalizationCustomizationId||null,a.componentUuid=n.smarteditComponentUuid||null,e.openEditAction(a)},a.openEditComponentAction=function(t){var n=angular.fromJson(t.properties),a={};return a.smarteditComponentType=n.smarteditComponentType,a.smarteditComponentUuid=n.smarteditComponentUuid,a.smarteditCatalogVersionUuid=n.smarteditCatalogVersionUuid,e.openEditComponentAction(a)},a}]),angular.module("personalizationsmarteditShowActionListModule",["personalizationsmarteditCommons","personalizationsmarteditContextServiceModule"]).controller("personalizationsmarteditShowActionListController",["personalizationsmarteditContextService","personalizationsmarteditUtils",function(e,t){var n=this;this.initItem=function(e){e.visible=!1,(e.variation.actions||[]).forEach(function(t){t.containerId&&t.containerId===n.component.containerId&&(e.visible=!0)})},this.isCustomizationFromCurrentCatalog=function(n){return t.isItemFromCurrentCatalog(n,e.getSeData())},this.$onInit=function(){n.selectedItems=e.getCombinedView().selectedItems,n.getClassForElement=t.getClassForElement,n.getLetterForElement=t.getLetterForElement}}]).component("personalizationsmarteditShowActionList",{templateUrl:"personalizationsmarteditShowActionListTemplate.html",controller:"personalizationsmarteditShowActionListController",controllerAs:"ctrl",transclude:!1,bindings:{component:"<"}}),angular.module("personalizationsmarteditExternalComponentDecoratorModule",[]).directive("personalizationsmarteditExternalComponentDecorator",function(){return{templateUrl:"externalComponentDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}}),angular.module("personalizationsmarteditmodule",["decoratorServiceModule","personalizationsmarteditContextServiceModule","personalizationsmarteditComponentLightUpDecorator","personalizationsmarteditCombinedViewComponentLightUpDecorator","personalizationsmarteditContextMenu","personalizationsmarteditCommons","personalizationsmarteditSharedSlotDecorator","featureServiceModule","personalizationsmarteditShowActionListModule","yjqueryModule","personalizationsmarteditContextualMenuServiceModule","externalComponentDecoratorModule","externalComponentButtonModule","personalizationsmarteditComponentHandlerServiceModule","personalizationsmarteditExternalComponentDecoratorModule"]).directive("body",["personalizationsmarteditContextService",function(e){return{link:function(t,n,a){t.$watch("element.class",function(){var t=n.attr("class").split(" ").filter(function(e){return/smartedit-page-uid\-(\S+)/.test(e)});if(t.length>0){var a=/smartedit-page-uid\-(\S+)/.exec(t[0])[1];e.setPageId(a),t.length>1&&console.log("more than one page- class element attribute defined")}},!0)}}}]).run(["$q","yjQuery","decoratorService","personalizationsmarteditContextualMenuService","personalizationsmarteditContextServiceProxy","personalizationsmarteditContextModalHelper","featureService","personalizationsmarteditUtils","domain","personalizationsmarteditComponentHandlerService",function(e,t,n,a,o,i,r,s,l,c){!function(e){var n=t("<link rel='stylesheet' type='text/css' href='"+e+"'>");t("head").append(n)}(l+"/personalizationsmartedit/css/style.css");new o("PersonalizationCtxGateway");n.addMappings({"^.*Slot$":["personalizationsmarteditSharedSlot"]}),n.addMappings({"^.*Component$":["personalizationsmarteditComponentLightUp","personalizationsmarteditCombinedViewComponentLightUp"]}),n.addMappings({"^((?!Slot).)*$":["personalizationsmarteditExternalComponentDecorator"]}),r.addDecorator({key:"personalizationsmarteditExternalComponentDecorator",nameI18nKey:"personalizationsmarteditExternalComponentDecorator",displayCondition:function(t,n){var a=c.getOriginalComponent(n,t),o=c.getParentContainerForComponent(a);return o.length>0&&o[0].attributes["data-smartedit-personalization-action-id"]?e.when(!1):e.when(c.isExternalComponent(n,t))}}),r.addDecorator({key:"personalizationsmarteditComponentLightUp",nameI18nKey:"personalizationsmarteditComponentLightUp"}),r.addDecorator({key:"personalizationsmarteditCombinedViewComponentLightUp",nameI18nKey:"personalizationsmarteditCombinedViewComponentLightUp"}),r.addDecorator({key:"personalizationsmarteditSharedSlot",nameI18nKey:"personalizationsmarteditSharedSlot"}),r.addContextualMenuButton({key:"personalizationsmartedit.context.add.action",i18nKey:"personalization.context.action.add",nameI18nKey:"personalization.context.action.add",regexpKeys:["^.*Component$"],condition:function(e){return a.isContextualMenuAddItemEnabled(e)},action:{callback:function(e,t){i.openAddAction(e)}},displayClass:"addactionbutton",displayIconClass:"hyicon hyicon-addlg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-addlg cmsx-ctx__icon--small",permissions:["se.edit.page"]}),r.addContextualMenuButton({key:"personalizationsmartedit.context.edit.action",i18nKey:"personalization.context.action.edit",nameI18nKey:"personalization.context.action.edit",regexpKeys:["^.*Component$"],condition:function(e){return a.isContextualMenuEditItemEnabled(e)},action:{callback:function(e,t){i.openEditAction(e)}},displayClass:"replaceactionbutton",displayIconClass:"hyicon hyicon-change cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-change cmsx-ctx__icon--small",permissions:["se.edit.page"]}),r.addContextualMenuButton({key:"personalizationsmartedit.context.delete.action",i18nKey:"personalization.context.action.delete",nameI18nKey:"personalization.context.action.delete",regexpKeys:["^.*Component$"],condition:function(e){return a.isContextualMenuDeleteItemEnabled(e)},action:{callback:function(e,t){i.openDeleteAction(e)}},displayClass:"removeactionbutton",displayIconClass:"hyicon hyicon-removelg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-removelg cmsx-ctx__icon--small",permissions:["se.edit.page"]}),r.addContextualMenuButton({key:"personalizationsmartedit.context.info.action",i18nKey:"personalization.context.action.info",nameI18nKey:"personalization.context.action.info",regexpKeys:["^.*Component$"],condition:function(e){return a.isContextualMenuInfoItemEnabled(e.element)},action:{template:'<div class="perso-ctx__button-template" data-translate="personalization.error.nocustomizationvariationselected"></div>'},displayClass:"infoactionbutton",displayIconClass:"hyicon hyicon-warning cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-warning cmsx-ctx__icon--small",permissions:["se.edit.page"]}),r.addContextualMenuButton({key:"personalizationsmartedit.context.component.edit.action",i18nKey:"personalization.context.component.action.edit",nameI18nKey:"personalization.context.component.action.edit",regexpKeys:["^.*Component$"],condition:function(e){return a.isContextualMenuEditComponentItemEnabled(e)},action:{callback:function(e,t){i.openEditComponentAction(e)}},displayClass:"editbutton",displayIconClass:"hyicon hyicon-edit cmsx-ctx__icon",displaySmallIconClass:"hyicon hyicon-edit cmsx-ctx__icon--small",permissions:["se.edit.page"]}),r.addContextualMenuButton({key:"personalizationsmartedit.context.show.action.list",i18nKey:"personalization.context.action.list.show",nameI18nKey:"personalization.context.action.list.show",regexpKeys:["^.*Component$"],condition:function(e){return a.isContextualMenuShowActionListEnabled(e)},action:{template:'<personalizationsmartedit-show-action-list data-component="componentDetails"></personalizationsmartedit-show-action-list>'},displayClass:"showactionlistbutton",displayIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon--small",permissions:["se.edit.page"]})}]),angular.module("personalizationsmarteditContextServiceModule",["yjqueryModule","personalizationsmarteditCommons","contextualMenuServiceModule","personalizationsmarteditContextUtilsModule"]).factory("personalizationsmarteditContextService",["yjQuery","personalizationsmarteditContextServiceReverseProxy","contextualMenuService","personalizationsmarteditContextUtils",function(e,t,n,a){var o=a.getContextObject(),i=new t("PersonalizationCtxReverseGateway");return o.getPersonalization=function(){return o.personalization},o.setPersonalization=function(e){o.personalization=e,n.refreshMenuItems()},o.getCustomize=function(){return o.customize},o.setCustomize=function(e){o.customize=e,n.refreshMenuItems()},o.getCombinedView=function(){return o.combinedView},o.setCombinedView=function(e){o.combinedView=e,n.refreshMenuItems()},o.getSeData=function(){return o.seData},o.setSeData=function(e){o.seData=e},o.applySynchronization=function(){i.applySynchronization()},o.setPageId=function(e){o.seData.pageId=e,i.setPageId(e)},o}]).factory("personalizationsmarteditContextServiceProxy",["gatewayProxy","personalizationsmarteditContextService",function(e,t){var n=function(t){this.gatewayId=t,e.initForService(this)};return n.prototype.setPersonalization=function(e){t.setPersonalization(e)},n.prototype.setCustomize=function(e){t.setCustomize(e)},n.prototype.setCombinedView=function(e){t.setCombinedView(e)},n.prototype.setSeData=function(e){t.setSeData(e)},n}]).factory("personalizationsmarteditContextServiceReverseProxy",["gatewayProxy",function(e){var t=function(t){this.gatewayId=t,e.initForService(this)};return t.prototype.applySynchronization=function(){},t.prototype.setPageId=function(e){},t}]),angular.module("personalizationsmarteditContextualMenuServiceModule",["personalizationsmarteditContextServiceModule","personalizationsmarteditComponentHandlerServiceModule","personalizationsmarteditCommons","yjqueryModule"]).factory("personalizationsmarteditContextualMenuService",["personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","yjQuery","personalizationsmarteditUtils",function(e,t,n,a){var o,i,r,s,l={},c=function(){o=e.getPersonalization(),i=e.getCustomize(),r=e.getCombinedView(),s=e.getSeData()},d=function(e){return angular.isObject(e.selectedCustomization)&&angular.isObject(e.selectedVariations)&&!angular.isArray(e.selectedVariations)},m=function(){return d(i)||r.enabled&&d(r.customize)},p=function(e){return r.enabled?n.inArray(e.containerId,r.customize.selectedComponents)>-1:n.inArray(e.containerId,i.selectedComponents)>-1},u=function(e){var n=t.getParentSlotForComponent(e.element),a=t.getCatalogVersionUuid(n);return s.seExperienceData.catalogDescriptor.catalogVersionUuid===a},g=function(e){return s.seExperienceData.catalogDescriptor.catalogVersionUuid===e.smarteditCatalogVersionUuid},C=function(){var t=i.selectedCustomization||r.customize.selectedCustomization;return!!t&&a.isItemFromCurrentCatalog(t,e.getSeData())},f=function(t){var n=(r.selectedItems||[]).filter(function(e){return e.customization.code===t.smarteditPersonalizationCustomizationId&&e.variation.code===t.smarteditPersonalizationVariationId});return!!(n=n.shift())&&a.isItemFromCurrentCatalog(n.customization,e.getSeData())};return l.isContextualMenuAddItemEnabled=function(e){c();var t=m();return t=t&&!p(e),t=t&&u(e),t=t&&C()},l.isContextualMenuEditItemEnabled=function(e){c();var t=o.enabled,n=angular.fromJson(e.properties);return t=t&&angular.isDefined(n.smarteditPersonalizationActionId),t=t&&u(e),t=t&&(C()||f(n))},l.isContextualMenuDeleteItemEnabled=l.isContextualMenuEditItemEnabled,l.isContextualMenuShowActionListEnabled=function(e){var t=angular.fromJson(e.properties),n=angular.isDefined(t.smarteditPersonalizationActionId);return n=n&&r.enabled,n=n&&!r.customize.selectedCustomization},l.isContextualMenuInfoItemEnabled=function(e){c();var t=o.enabled;return t=t&&!angular.isObject(i.selectedVariations),t=t||angular.isArray(i.selectedVariations),t=t&&!r.enabled},l.isContextualMenuEditComponentItemEnabled=function(e){c();var t=o.enabled,n=angular.fromJson(e.properties);return t=t&&!r.enabled&&g(n)},l}]),angular.module("personalizationsmarteditSharedSlotDecorator",["slotSharedServiceModule"]).controller("personalizationsmarteditSharedSlotController",["slotSharedService","$element",function(e,t){var n=this,a=function(){t.offset().top<=t.find(".decorative-panel-area").height()&&t.find(".decorative-panel-area").css("margin-top",t.find(".decorator-padding-container").height())};this.$onChanges=function(e){e.active&&e.active.currentValue&&(a(),n.isPopupOpened=!1)},this.$onInit=function(){n.slotSharedFlag=!1,e.isSlotShared(n.smarteditComponentId).then(function(e){n.slotSharedFlag=e})}}]).directive("personalizationsmarteditSharedSlot",function(){return{templateUrl:"personalizationsmarteditSharedSlotDecoratorTemplate.html",restrict:"C",controller:"personalizationsmarteditSharedSlotController",controllerAs:"ctrl",scope:{},transclude:!0,bindToController:{smarteditComponentId:"@",active:"<"}}}),angular.module("personalizationsmarteditTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/personalizationsmartedit/combinedView/personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",'<div ng-class="getPersonalizationComponentBorderClass()">\n    <div ng-class="classForElement">{{letterForElement}}</div>\n    <div data-ng-transclude></div>\n</div>'),e.put("web/features/personalizationsmartedit/componentLightUpDecorator/personalizationsmarteditComponentLightUpDecoratorTemplate.html",'<div ng-class="getPersonalizationComponentBorderClass()">\n    <div data-ng-transclude></div>\n</div>'),e.put("web/features/personalizationsmartedit/contextMenu/personalizationsmarteditShowActionList/personalizationsmarteditShowActionListTemplate.html",'<div class="pe-combinedview-ranking">\n    <div class="pe-combinedview-ranking__info-layout">\n        <div class="pe-combinedview-ranking__title" data-translate="personalization.modal.showactionlist.title"></div>\n        <div class="perso__page-level-help-message" data-translate="personalization.modal.showactionlist.help.label"></div>\n    </div>\n    <div class="pe-combinedview-ranking__list-item" data-ng-repeat="item in ctrl.selectedItems" data-ng-init="ctrl.initItem(item)" data-ng-show="item.visible">\n        <div class="pe-combinedview-ranking__letter-layout">\n            <div data-ng-class="ctrl.getClassForElement($index)" data-ng-bind="ctrl.getLetterForElement($index)"></div>\n        </div>\n        <div class="pe-combinedview-ranking__names-layout">\n            <div class="perso-wrap-ellipsis pe-combinedview-ranking__cname" data-ng-bind="item.customization.name" title="{{item.customization.name}}"></div>\n            <div class="perso-wrap-ellipsis pe-combinedview-ranking__vname" data-ng-bind="item.variation.name" title="{{item.variation.name}}"></div>\n        </div>\n        <div class="pe-combinedview-ranking__icon">\n            <span data-ng-if="!ctrl.isCustomizationFromCurrentCatalog(item.customization)" class="perso__globe-icon hyicon hyicon-globe" data-uib-tooltip="{{item.variation.catalogVersionNameL10N}}" data-tooltip-placement="top right"></span>\n        </div>\n    </div>\n</div>'),e.put("web/features/personalizationsmartedit/sharedSlotDecorator/personalizationsmarteditSharedSlotDecoratorTemplate.html",'<div>\n    <div class="cmsx-ctx-wrapper1 se-slot-contextual-menu-level1">\n        <div class="cmsx-ctx-wrapper2 se-slot-contextual-menu-level2">\n            <div class="decorative-panel-area" data-ng-if="ctrl.active && ctrl.slotSharedFlag">\n                <div class="decorator-panel-padding-center"></div>\n                <div class="decorative-panel-slot-contextual-menu">\n                    <div class="shared-slot-button-template" data-ng-if="ctrl.slotSharedFlag">\n                        <div class="btn-group se-slot-ctx-menu__btn-group" data-uib-dropdown data-dropdown-append-to="\'#smarteditoverlay\'" data-auto-close="outsideClick" data-is-open="ctrl.isPopupOpened">\n                            <button type="button" data-uib-dropdown-toggle class="btn btn-primary shared-slot-button-template__btn se-slot-ctx-menu__divider" data-ng-class="{\'ySESharedSlotOpen\': ctrl.isPopupOpened}" id="sharedSlotButton-{{::ctrl.smarteditComponentId}}">\n                                <span class="hyicon hyicon-linked se-slot-ctx-menu__icon-shared"></span>\n                            </button>\n                            <div class="dropdown-menu dropdown-menu-right btn-block shared-slot__dropdown" data-uib-dropdown-menu>\n                                <div class="shared-slot__description" data-translate="se.cms.slot.shared.popover.message"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="decorator-padding-container">\n                <div class="decorator-padding-left" data-ng-class="{active: ctrl.active}"></div>\n                <div data-ng-class="ctrl.active && ctrl.slotSharedFlag ? \'decorator-slot-border active\' : \'\'"></div>\n                <div class="yWrapperData" data-ng-transclude data-ng-class="{active: ctrl.active}"></div>\n                <div class="decorator-padding-right" data-ng-class="{active: ctrl.active}"></div>\n            </div>\n        </div>\n    </div>\n</div>')}]);